{"swagger":"2.0","info":{"description":"AI-powered chatbot service for bus ticket booking assistance\nThis service provides natural language processing for trip search, FAQ handling, and booking assistance.","title":"Chatbot Service API","contact":{"name":"API Support","email":"support@busbooking.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0"},"paths":{"/api/v1/chat":{"post":{"description":"Send a message to the chatbot and get an AI-powered response","consumes":["application/json"],"produces":["application/json"],"tags":["chatbot"],"summary":"Chat with AI assistant","parameters":[{"description":"Chat request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.ChatRequest"}}],"responses":{"200":{"description":"OK","schema":{"allOf":[{"$ref":"#/definitions/ginext.Response"},{"type":"object","properties":{"data":{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.ChatResponse"}}}]}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ginext.Response"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/ginext.Response"}}}}},"/api/v1/chat/extract-search":{"get":{"description":"Extract trip search parameters from natural language","consumes":["application/json"],"produces":["application/json"],"tags":["chatbot"],"summary":"Extract trip search parameters","parameters":[{"type":"string","description":"Natural language message","name":"message","in":"query","required":true}],"responses":{"200":{"description":"OK","schema":{"allOf":[{"$ref":"#/definitions/ginext.Response"},{"type":"object","properties":{"data":{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.TripSearchParams"}}}]}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ginext.Response"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/ginext.Response"}}}}},"/api/v1/chat/faq":{"get":{"description":"Get answer to frequently asked questions","consumes":["application/json"],"produces":["application/json"],"tags":["chatbot"],"summary":"Get FAQ answer","parameters":[{"type":"string","description":"Question","name":"question","in":"query","required":true}],"responses":{"200":{"description":"OK","schema":{"allOf":[{"$ref":"#/definitions/ginext.Response"},{"type":"object","properties":{"data":{"type":"string"}}}]}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/ginext.Response"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/ginext.Response"}}}}}},"definitions":{"bus-booking_chatbot-service_internal_model.ChatContext":{"type":"object","properties":{"booking_id":{"description":"NEW: Created booking ID","type":"string"},"booking_reference":{"description":"NEW: Booking reference code","type":"string"},"current_step":{"description":"\"search\", \"select_trip\", \"select_seats\", \"collect_info\", \"booking\", \"payment\"","type":"string"},"passenger_details":{"description":"NEW: Collected passenger info","type":"array","items":{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.PassengerDetail"}},"selected_seats":{"description":"NEW: Seats user wants to book","type":"array","items":{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.SelectedSeat"}},"selected_trip":{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.TripInfo"},"trip_search_id":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_chatbot-service_internal_model.ChatMessage":{"type":"object","properties":{"content":{"description":"Message content","type":"string"},"role":{"description":"\"user\", \"assistant\", \"system\"","type":"string"}}},"bus-booking_chatbot-service_internal_model.ChatRequest":{"type":"object","required":["message"],"properties":{"context":{"description":"Optional context","allOf":[{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.ChatContext"}]},"history":{"description":"Conversation history","type":"array","items":{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.ChatMessage"}},"message":{"type":"string"},"session_id":{"description":"Optional session tracking","type":"string"}}},"bus-booking_chatbot-service_internal_model.ChatResponse":{"type":"object","properties":{"action":{"description":"\"show_trips\", \"show_booking_form\", etc.","type":"string"},"context":{"description":"Updated context","allOf":[{"$ref":"#/definitions/bus-booking_chatbot-service_internal_model.ChatContext"}]},"data":{"description":"Additional data (trip results, booking info, etc.)"},"intent":{"description":"\"search_trip\", \"book_trip\", \"faq\", \"other\"","type":"string"},"message":{"type":"string"},"suggestions":{"description":"Quick reply suggestions","type":"array","items":{"type":"string"}}}},"bus-booking_chatbot-service_internal_model.PassengerDetail":{"type":"object","properties":{"email":{"type":"string"},"name":{"type":"string"},"phone":{"type":"string"},"seat_number":{"description":"Which seat this passenger is assigned to","type":"string"}}},"bus-booking_chatbot-service_internal_model.SelectedSeat":{"type":"object","properties":{"seat_id":{"description":"UUID from trip service","type":"string"},"seat_number":{"description":"e.g., \"A1\"","type":"string"}}},"bus-booking_chatbot-service_internal_model.TripInfo":{"type":"object","properties":{"departure_time":{"type":"string"},"destination":{"type":"string"},"origin":{"type":"string"},"price":{"type":"number"},"trip_id":{"type":"string"}}},"bus-booking_chatbot-service_internal_model.TripSearchParams":{"type":"object","properties":{"departure_date":{"type":"string"},"destination":{"type":"string"},"origin":{"type":"string"},"passengers":{"type":"integer"}}},"ginext.ErrorBody":{"type":"object","properties":{"message":{"type":"string"}}},"ginext.MetaData":{"type":"object","properties":{"page":{"type":"integer"},"page_size":{"type":"integer"},"total":{"type":"integer"},"total_pages":{"type":"integer"}}},"ginext.Response":{"type":"object","properties":{"code":{"type":"integer"},"data":{},"error":{"$ref":"#/definitions/ginext.ErrorBody"},"header":{"$ref":"#/definitions/http.Header"},"message":{"type":"string"},"meta":{"$ref":"#/definitions/ginext.MetaData"}}},"http.Header":{"type":"object","additionalProperties":{"type":"array","items":{"type":"string"}}}},"securityDefinitions":{"BearerAuth":{"description":"Type \"Bearer\" followed by a space and JWT token.","type":"apiKey","name":"Authorization","in":"header"}}}