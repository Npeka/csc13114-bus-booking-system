definitions:
  bus-booking_payment-service_internal_model.CreatePaymentLinkRequest:
    properties:
      amount:
        type: integer
      booking_id:
        type: string
      currency:
        $ref: '#/definitions/bus-booking_payment-service_internal_model.Currency'
      description:
        type: string
      payment_method:
        $ref: '#/definitions/bus-booking_payment-service_internal_model.PaymentMethod'
    required:
    - amount
    - booking_id
    - currency
    - payment_method
    type: object
  bus-booking_payment-service_internal_model.Currency:
    enum:
    - VND
    type: string
    x-enum-varnames:
    - CurrencyVND
  bus-booking_payment-service_internal_model.PaymentMethod:
    enum:
    - PAYOS
    type: string
    x-enum-varnames:
    - PaymentMethodPayOS
  bus-booking_payment-service_internal_model.PaymentWebhookData:
    properties:
      code:
        type: string
      data:
        $ref: '#/definitions/bus-booking_payment-service_internal_model.PaymentWebhookDetails'
      desc:
        type: string
      signature:
        type: string
      success:
        type: boolean
    type: object
  bus-booking_payment-service_internal_model.PaymentWebhookDetails:
    properties:
      accountNumber:
        type: string
      amount:
        type: integer
      code:
        type: string
      counterAccountBankId:
        type: string
      counterAccountBankName:
        type: string
      counterAccountName:
        type: string
      counterAccountNumber:
        type: string
      currency:
        type: string
      desc:
        type: string
      description:
        type: string
      orderCode:
        type: integer
      paymentLinkId:
        type: string
      reference:
        type: string
      transactionDateTime:
        type: string
      virtualAccountName:
        type: string
      virtualAccountNumber:
        type: string
    type: object
  bus-booking_payment-service_internal_model.TransactionResponse:
    properties:
      amount:
        type: integer
      booking_id:
        type: string
      checkout_url:
        type: string
      created_at:
        type: string
      currency:
        $ref: '#/definitions/bus-booking_payment-service_internal_model.Currency'
      id:
        type: string
      order_code:
        type: integer
      payment_method:
        $ref: '#/definitions/bus-booking_payment-service_internal_model.PaymentMethod'
      qr_code:
        type: string
      status:
        $ref: '#/definitions/bus-booking_payment-service_internal_model.TransactionStatus'
      updated_at:
        type: string
      user_id:
        type: string
    type: object
  bus-booking_payment-service_internal_model.TransactionStatus:
    enum:
    - PENDING
    - CANCELLED
    - UNDERPAID
    - PAID
    - EXPIRED
    - PROCESSING
    - FAILED
    type: string
    x-enum-varnames:
    - TransactionStatusPending
    - TransactionStatusCancelled
    - TransactionStatusUnderpaid
    - TransactionStatusPaid
    - TransactionStatusExpired
    - TransactionStatusProcessing
    - TransactionStatusFailed
  ginext.ErrorBody:
    properties:
      message:
        type: string
    type: object
  ginext.MetaData:
    properties:
      page:
        type: integer
      page_size:
        type: integer
      total:
        type: integer
      total_pages:
        type: integer
    type: object
  ginext.Response:
    properties:
      code:
        type: integer
      data: {}
      error:
        $ref: '#/definitions/ginext.ErrorBody'
      header:
        $ref: '#/definitions/http.Header'
      message:
        type: string
      meta:
        $ref: '#/definitions/ginext.MetaData'
    type: object
  http.Header:
    additionalProperties:
      items:
        type: string
      type: array
    type: object
info:
  contact:
    email: support@busbooking.com
    name: API Support
  description: |-
    API for payment processing in the bus booking system
    This service handles payment transactions, refunds, and payment history.
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: Payment Service API
  version: "1.0"
paths:
  /api/v1/transactions/{id}:
    get:
      consumes:
      - application/json
      description: Retrieve transaction details by transaction ID
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/ginext.Response'
            - properties:
                data:
                  $ref: '#/definitions/bus-booking_payment-service_internal_model.TransactionResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ginext.Response'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/ginext.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/ginext.Response'
      summary: Get transaction by ID
      tags:
      - transactions
  /api/v1/transactions/payment-link:
    post:
      consumes:
      - application/json
      description: Create a payment link via PayOS for a booking
      parameters:
      - description: Payment creation request
        in: body
        name: transaction
        required: true
        schema:
          $ref: '#/definitions/bus-booking_payment-service_internal_model.CreatePaymentLinkRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/ginext.Response'
            - properties:
                data:
                  $ref: '#/definitions/bus-booking_payment-service_internal_model.TransactionResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ginext.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/ginext.Response'
      summary: Create a payment link
      tags:
      - transactions
  /api/v1/transactions/webhook:
    post:
      consumes:
      - application/json
      description: Handle payment webhook notification from PayOS
      parameters:
      - description: Webhook payload
        in: body
        name: webhook
        required: true
        schema:
          $ref: '#/definitions/bus-booking_payment-service_internal_model.PaymentWebhookData'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ginext.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/ginext.Response'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/ginext.Response'
      summary: Handle PayOS webhook
      tags:
      - transactions
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
