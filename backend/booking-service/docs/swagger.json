{"swagger":"2.0","info":{"description":"API for booking management in the bus booking system\nThis service handles bookings, seat reservations, and feedback.","title":"Booking Service API","contact":{"name":"API Support","email":"support@busbooking.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0"},"paths":{"/bookings":{"post":{"description":"Create a new booking with seat selection","consumes":["application/json"],"produces":["application/json"],"tags":["bookings"],"summary":"Create a new booking","parameters":[{"description":"Booking creation request","name":"booking","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.CreateBookingRequest"}}],"responses":{"201":{"description":"Created","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.BookingResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/bookings/trip/{trip_id}":{"get":{"description":"Get all bookings for a specific trip with pagination","produces":["application/json"],"tags":["bookings"],"summary":"Get trip bookings","parameters":[{"type":"string","description":"Trip ID","name":"trip_id","in":"path","required":true},{"type":"integer","default":1,"description":"Page number","name":"page","in":"query"},{"type":"integer","default":10,"description":"Items per page","name":"limit","in":"query"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.PaginatedBookingResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/bookings/user/{user_id}":{"get":{"description":"Get all bookings for a specific user with pagination","produces":["application/json"],"tags":["bookings"],"summary":"Get user bookings","parameters":[{"type":"string","description":"User ID","name":"user_id","in":"path","required":true},{"type":"integer","default":1,"description":"Page number","name":"page","in":"query"},{"type":"integer","default":10,"description":"Items per page","name":"limit","in":"query"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.PaginatedBookingResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/bookings/{id}":{"get":{"description":"Get a specific booking by its ID","produces":["application/json"],"tags":["bookings"],"summary":"Get booking by ID","parameters":[{"type":"string","description":"Booking ID","name":"id","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.BookingResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/bookings/{id}/cancel":{"post":{"description":"Cancel a booking and release seats","consumes":["application/json"],"produces":["application/json"],"tags":["bookings"],"summary":"Cancel a booking","parameters":[{"type":"string","description":"Booking ID","name":"id","in":"path","required":true},{"description":"Cancellation request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.CancelBookingRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.SuccessResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/bookings/{id}/status":{"put":{"description":"Update the status of a booking","consumes":["application/json"],"produces":["application/json"],"tags":["bookings"],"summary":"Update booking status","parameters":[{"type":"string","description":"Booking ID","name":"id","in":"path","required":true},{"description":"Status update request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.UpdateBookingStatusRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.SuccessResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/feedback":{"post":{"description":"Create feedback for a completed booking","consumes":["application/json"],"produces":["application/json"],"tags":["feedback"],"summary":"Create feedback","parameters":[{"description":"Feedback creation request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.CreateFeedbackRequest"}}],"responses":{"201":{"description":"Created","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.FeedbackResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/feedback/booking/{booking_id}":{"get":{"description":"Get feedback for a specific booking","produces":["application/json"],"tags":["feedback"],"summary":"Get booking feedback","parameters":[{"type":"string","description":"Booking ID","name":"booking_id","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.FeedbackResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"404":{"description":"Not Found","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/feedback/trip/{trip_id}":{"get":{"description":"Get all feedbacks for a specific trip with pagination","produces":["application/json"],"tags":["feedback"],"summary":"Get trip feedbacks","parameters":[{"type":"string","description":"Trip ID","name":"trip_id","in":"path","required":true},{"type":"integer","default":1,"description":"Page number","name":"page","in":"query"},{"type":"integer","default":10,"description":"Items per page","name":"limit","in":"query"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.PaginatedFeedbackResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/health":{"get":{"description":"Check service health","produces":["application/json"],"tags":["health"],"summary":"Health check","responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.HealthResponse"}}}}},"/payment/methods":{"get":{"description":"Get all available payment methods","produces":["application/json"],"tags":["payment"],"summary":"Get payment methods","responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.PaymentMethodResponse"}}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/payment/process":{"post":{"description":"Process payment for a booking","consumes":["application/json"],"produces":["application/json"],"tags":["payment"],"summary":"Process payment","parameters":[{"description":"Payment processing request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ProcessPaymentRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.PaymentResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/seats/release":{"post":{"description":"Release a reserved seat back to available status","consumes":["application/json"],"produces":["application/json"],"tags":["seats"],"summary":"Release a reserved seat","parameters":[{"description":"Seat release request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ReleaseSeatRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.SuccessResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/seats/reserve":{"post":{"description":"Reserve a seat for a user temporarily","consumes":["application/json"],"produces":["application/json"],"tags":["seats"],"summary":"Reserve a seat","parameters":[{"description":"Seat reservation request","name":"request","in":"body","required":true,"schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ReserveSeatRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.SuccessResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/statistics/bookings":{"get":{"description":"Get booking statistics for a date range","produces":["application/json"],"tags":["statistics"],"summary":"Get booking statistics","parameters":[{"type":"string","description":"Start date (YYYY-MM-DD)","name":"start_date","in":"query","required":true},{"type":"string","description":"End date (YYYY-MM-DD)","name":"end_date","in":"query","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.BookingStatsResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/statistics/popular-trips":{"get":{"description":"Get popular trips based on booking statistics","produces":["application/json"],"tags":["statistics"],"summary":"Get popular trips","parameters":[{"type":"integer","default":10,"description":"Number of trips to return","name":"limit","in":"query"},{"type":"integer","default":30,"description":"Number of days to look back","name":"days","in":"query"}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.TripStatsResponse"}}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}},"/trips/{trip_id}/seats":{"get":{"description":"Get available, reserved, and booked seats for a specific trip","produces":["application/json"],"tags":["seats"],"summary":"Get seat availability for a trip","parameters":[{"type":"string","description":"Trip ID","name":"trip_id","in":"path","required":true}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.SeatAvailabilityResponse"}},"400":{"description":"Bad Request","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}},"500":{"description":"Internal Server Error","schema":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.ErrorResponse"}}}}}},"definitions":{"bus-booking_booking-service_internal_model.Booking":{"type":"object","required":["passenger_name","passenger_phone","payment_method_id","total_amount","trip_id","user_id"],"properties":{"booking_seats":{"type":"array","items":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.BookingSeat"}},"cancellation_reason":{"type":"string"},"cancelled_at":{"type":"string"},"completed_at":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"string"},"passenger_email":{"type":"string"},"passenger_name":{"type":"string"},"passenger_phone":{"type":"string"},"payment_method":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.PaymentMethod"},"payment_method_id":{"type":"string"},"special_requests":{"type":"string"},"status":{"type":"string"},"total_amount":{"type":"number","minimum":0},"trip_id":{"type":"string"},"updated_at":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.BookingResponse":{"type":"object","properties":{"cancellation_reason":{"type":"string"},"cancelled_at":{"type":"string"},"completed_at":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"string"},"passenger_email":{"type":"string"},"passenger_name":{"type":"string"},"passenger_phone":{"type":"string"},"payment_method":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.PaymentMethodResponse"},"seats":{"type":"array","items":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.BookingSeatResponse"}},"special_requests":{"type":"string"},"status":{"type":"string"},"total_amount":{"type":"number"},"trip_id":{"type":"string"},"updated_at":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.BookingSeat":{"type":"object","required":["booking_id","price","seat_id"],"properties":{"booking":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.Booking"},"booking_id":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"string"},"price":{"type":"number","minimum":0},"seat_id":{"type":"string"},"updated_at":{"type":"string"}}},"bus-booking_booking-service_internal_model.BookingSeatResponse":{"type":"object","properties":{"id":{"type":"string"},"price":{"type":"number"},"seat_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.BookingStatsResponse":{"type":"object","properties":{"average_rating":{"type":"number"},"cancelled_bookings":{"type":"integer"},"completed_bookings":{"type":"integer"},"end_date":{"type":"string"},"start_date":{"type":"string"},"total_bookings":{"type":"integer"},"total_revenue":{"type":"number"}}},"bus-booking_booking-service_internal_model.CancelBookingRequest":{"type":"object","required":["reason","user_id"],"properties":{"reason":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.CreateBookingRequest":{"type":"object","required":["passenger_name","passenger_phone","payment_method_id","seat_ids","seat_price","total_amount","trip_id","user_id"],"properties":{"passenger_email":{"type":"string"},"passenger_name":{"type":"string"},"passenger_phone":{"type":"string"},"payment_method_id":{"type":"string"},"seat_ids":{"type":"array","maxItems":10,"minItems":1,"items":{"type":"string"}},"seat_price":{"type":"number","minimum":0},"special_requests":{"type":"string"},"total_amount":{"type":"number","minimum":0},"trip_id":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.CreateFeedbackRequest":{"type":"object","required":["booking_id","rating","user_id"],"properties":{"booking_id":{"type":"string"},"comment":{"type":"string"},"rating":{"type":"integer","maximum":5,"minimum":1},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.ErrorResponse":{"type":"object","properties":{"error":{"type":"string"},"message":{"type":"string"}}},"bus-booking_booking-service_internal_model.FeedbackResponse":{"type":"object","properties":{"booking_id":{"type":"string"},"comment":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"string"},"rating":{"type":"integer"},"trip_id":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.HealthResponse":{"type":"object","properties":{"service":{"type":"string"},"status":{"type":"string"},"timestamp":{"type":"string"}}},"bus-booking_booking-service_internal_model.PaginatedBookingResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.BookingResponse"}},"limit":{"type":"integer"},"page":{"type":"integer"},"total":{"type":"integer"},"total_pages":{"type":"integer"}}},"bus-booking_booking-service_internal_model.PaginatedFeedbackResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.FeedbackResponse"}},"limit":{"type":"integer"},"page":{"type":"integer"},"total":{"type":"integer"},"total_pages":{"type":"integer"}}},"bus-booking_booking-service_internal_model.PaymentMethod":{"type":"object","required":["code","name"],"properties":{"code":{"type":"string"},"created_at":{"type":"string"},"description":{"type":"string"},"id":{"type":"string"},"is_active":{"type":"boolean"},"name":{"type":"string"},"updated_at":{"type":"string"}}},"bus-booking_booking-service_internal_model.PaymentMethodResponse":{"type":"object","properties":{"code":{"type":"string"},"description":{"type":"string"},"id":{"type":"string"},"is_active":{"type":"boolean"},"name":{"type":"string"}}},"bus-booking_booking-service_internal_model.PaymentResponse":{"type":"object","properties":{"amount":{"type":"number"},"booking_id":{"type":"string"},"payment_method_id":{"type":"string"},"processed_at":{"type":"string"},"status":{"type":"string"},"transaction_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.ProcessPaymentRequest":{"type":"object","required":["booking_id"],"properties":{"booking_id":{"type":"string"},"token":{"type":"string"}}},"bus-booking_booking-service_internal_model.ReleaseSeatRequest":{"type":"object","required":["seat_id","trip_id"],"properties":{"seat_id":{"type":"string"},"trip_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.ReserveSeatRequest":{"type":"object","required":["seat_id","trip_id","user_id"],"properties":{"reservation_minutes":{"type":"integer"},"seat_id":{"type":"string"},"trip_id":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.SeatAvailabilityResponse":{"type":"object","properties":{"available_seats":{"type":"array","items":{"type":"string"}},"booked_seats":{"type":"array","items":{"type":"string"}},"reserved_seats":{"type":"array","items":{"type":"string"}},"seat_details":{"type":"object","additionalProperties":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.SeatStatus"}},"trip_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.SeatStatus":{"type":"object","required":["seat_id","seat_number","trip_id"],"properties":{"booking":{"$ref":"#/definitions/bus-booking_booking-service_internal_model.Booking"},"booking_id":{"type":"string"},"created_at":{"type":"string"},"id":{"type":"string"},"reserved_until":{"type":"string"},"seat_id":{"type":"string"},"seat_number":{"type":"string"},"status":{"type":"string"},"trip_id":{"type":"string"},"updated_at":{"type":"string"},"user_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.SuccessResponse":{"type":"object","properties":{"data":{},"message":{"type":"string"}}},"bus-booking_booking-service_internal_model.TripStatsResponse":{"type":"object","properties":{"average_rating":{"type":"number"},"total_bookings":{"type":"integer"},"total_revenue":{"type":"number"},"trip_id":{"type":"string"}}},"bus-booking_booking-service_internal_model.UpdateBookingStatusRequest":{"type":"object","required":["status"],"properties":{"status":{"type":"string"}}}},"securityDefinitions":{"BearerAuth":{"description":"Type \"Bearer\" followed by a space and JWT token.","type":"apiKey","name":"Authorization","in":"header"}}}